<h1><%= title %></h1>

<!-- Flash messages (rendered by express-messages) -->
<%- messages() %>

<% if (errors) { %>
  <ul class="notice">
 <% errors.array().forEach(error => { %>
   <li><%= error.msg %></li>
<%  }) %>
 </ul>
<% } %>

<!-- Registration Form -->
<form action="/account/register" method="post" class="registration-form" novalidate>
  <div class="form-row">
    <label for="account_firstname">First name</label>
    <input type="text" id="account_firstname" name="account_firstname" required>
  </div>

  <div class="form-row">
    <label for="account_lastname">Last name</label>
    <input type="text" id="account_lastname" name="account_lastname" required>
  </div>

  <div class="form-row">
    <label for="account_email">Email address</label>
    <input type="email" id="account_email" name="account_email" required>
  </div>

  <div class="form-row password-row">
    <label for="account_password">Password</label>
    <input
      type="password"
      id="account_password"
      name="account_password"
      minlength="12"
      placeholder="Min 12 chars, 1 uppercase, 1 number, 1 special char"
      required
    >
    <button type="button" id="togglePassword" class="toggle-btn" aria-label="Toggle password visibility">Show</button>
  </div>

  <div class="form-row">
    <button type="submit" class="btn">Register</button>
  </div>
</form>

<p class="muted">
  By registering you agree to our terms. Already have an account?
  <a href="/account/login">Login here</a>.
</p>

<!-- Optional: toggle password visibility -->
<script>
  (function () {
    const pwd = document.getElementById('account_password')
    const btn = document.getElementById('togglePassword')
    if (!pwd || !btn) return
    btn.addEventListener('click', () => {
      if (pwd.type === 'password') {
        pwd.type = 'text'
        btn.textContent = 'Hide'
      } else {
        pwd.type = 'password'
        btn.textContent = 'Show'
      }
    })
  })()
</script>